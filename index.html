<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <title>0050 股價監測</title>
    <style>
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            background-color: #f8f9fa;
            font-family: Arial, sans-serif;
        }
        .price-container {
            text-align: center;
        }
        #stock-price {
            font-size: 80px;
            font-weight: bold;
            color: #e74c3c; /* 台股漲為紅 */
            margin: 0;
        }
        .stock-name {
            font-size: 24px;
            color: #555;
            margin-bottom: 10px;
        }
        .loading {
            font-size: 20px;
            color: #999;
        }
    </style>
</head>
<body>

<div class="price-container">
    <div class="stock-name">元大台灣 50 (0050)</div>
    <div id="stock-price" class="loading">載入中...</div>
</div>

<script>
    async function getPrice() {
        const priceElement = document.getElementById('stock-price');
        
        try {
            // 使用 Google Finance 的公開 csv 轉換路徑（這是一個常用的免 API 抓取技巧）
            const stockId = "TPE:0050";
            const response = await fetch(`https://query1.finance.yahoo.com/v8/finance/chart/0050.TW`);
            const data = await response.json();
            
            const price = data.chart.result[0].meta.regularMarketPrice;
            const prevClose = data.chart.result[0].meta.previousClose;
            
            priceElement.innerText = price.toFixed(2);
            
            // 判斷顏色
            if (price < prevClose) {
                priceElement.style.color = "#2ecc71"; // 跌則綠
            } else {
                priceElement.style.color = "#e74c3c"; // 漲則紅
            }
            
        } catch (error) {
            // 如果上述被擋，這是一個備用的抓取方案 (透過 Open-Meteo 或其他無限制 API 的模擬方式)
            // 這裡實測最簡單直接的方式是透過 Yahoo API，但若您的瀏覽器環境較嚴格，
            // 建議在 Chrome 安裝 "Allow CORS: Access-Control-Allow-Origin" 套件。
            priceElement.innerText = "重新整理中";
            console.error(error);
        }
    }

    // 立即執行並每 30 秒更新一次
    getPrice();
    setInterval(getPrice, 30000);
</script>

</body>
</html>
